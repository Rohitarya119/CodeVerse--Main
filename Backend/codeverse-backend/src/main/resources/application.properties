spring.application.name=codeverse-backend
server.port=8081

#PostgreSQL Database Configuration
# These are overridden by environment variables in Docker (SPRING_DATASOURCE_URL, etc.)
# spring.datasource.url=jdbc:postgresql://localhost:5433/codeverse
# spring.datasource.username=postgres
# spring.datasource.password=postgres

# H2 Database Configuration (for local testing without Docker) - DISABLED for Supabase
# spring.datasource.url=jdbc:h2:mem:codeverse;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=PostgreSQL
# spring.datasource.username=sa
# spring.datasource.password=
# spring.h2.console.enabled=true
# spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# The driver is automatically detected, but you can be explicit
# spring.datasource.driverClassName=org.postgresql.Driver

# Connection Pool Settings (Robustness for Free Tier)
# Timeout increased to 60s to handle Supabase Wake-up time
spring.datasource.hikari.connection-timeout=60000
# Pool size settings are managed via Render Environment Variables
# spring.datasource.hikari.maximum-pool-size=3
# spring.datasource.hikari.minimum-idle=1

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update

app.jwt.secret=${JWT_SECRET:A4B5ED519FEE1BA2E5D905C3309E247C3B7BAB4608E011302954F775D9CC1741}
app.jwt.expiration-ms=86400000

# server.forward-headers-strategy=framework is crucial for Render to handle HTTPS correctly
server.forward-headers-strategy=framework

spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=profile,email
# Allow Spring to default to {baseUrl}/login/oauth2/code/{registrationId} which works better with proxies
# spring.security.oauth2.client.registration.google.redirect-uri=${GOOGLE_REDIRECT_URI:http://localhost:8081/login/oauth2/code/google}

spring.security.oauth2.client.registration.github.client-id=${GITHUB_CLIENT_ID}
spring.security.oauth2.client.registration.github.client-secret=${GITHUB_CLIENT_SECRET}
spring.security.oauth2.client.registration.github.scope=user:email


# Frontend Configuration
app.frontend.url=${FRONTEND_URL:http://localhost:5173}

# CORS Configuration
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173}